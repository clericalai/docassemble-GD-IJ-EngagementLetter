# See http://docassemble.org/docs/objects.html#tocAnchor-1-30-1
---
metadata:
  title: Engagement Letter
  short title: Engagement
  description: |
    Law Firm Engagement Letter Contract
  authors:
    - name: Nathan Roach
    - organization: GoodDocs.io
  revision_date: 2017-04-28
  debug: True
---
modules:
  - docassemble.base.util
  - docassemble.base.legal
---
objects:
  - case: Case
  - client: Individual
  - spouse: Individual
  - advocate: Individual
  - attorney: Individual
  - pleading: LegalFiling
  - court: Court
  - role_change: RoleChangeTracker # important
---
mandatory: true
code: |
  case.court = court
  pleading.case = case
---
generic object: Individual
question: |
  What is ${ x.object_possessive('name') }?
fields:
  - First Name: x.name.first
    default: ${ x.first_name_hint() }
  - Middle Name: x.name.middle
    required: False
  - Last Name: x.name.last
    default: ${ x.last_name_hint() }
  - Suffix: x.name.suffix
    required: False
code: |
  name_suffix()
# comment: |
#   If the object does not have a name yet, generic questions can refer
#   to it by the name of the variable itself.  For example, suppose you
#   create an object, case.judge, with the class of Individual.  If the
#   name of case.judge is ever needed, docassemble will use the question
#   above to ask "What is the name of the judge in the case?"
---
generic object: Individual
question: |
  What is ${ x.object_possessive('email') }?
fields:
  - email: x.email
    default: ${ x.email_address() }
    datatype: email
    required: False
code: |
  email()
---
code: |
  import time
  EffectiveDate = time.strftime("%m/%d/%Y")
---
role: client
code: |
  client_email = client.email_address()
  client_salutation = client.salutation
  client_name = client.name
  client_address = client.address_block()
# this block is intended to populate all the variables in the template with object properties prior to assembly
# it may be necessary to uncouple this from a role declaration if order of operations fails to prioritize this correctly
---
mandatory: true
role: client
question: Thanks for engaging our firm.  We will be in contact regarding next steps.
attachment:
  - name: ${ client_name } Engagement Letter
    filename: ${ client_name }-Engagement-Letter
    content file: TEMPLATE_Engagement Letter_Individual.md
---
