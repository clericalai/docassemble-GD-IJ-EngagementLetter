---
metadata:
  title: Engagement Letter
  short title: Engagement
  description: |
    Law Firm Engagement Letter Contract
  authors:
    - name: Nathan Roach
      organization: GoodDocs.io
  revision_date: 2017-04-28
---
modules:
  - docassemble.base.util
---
default role: attorney
code: |
  multi_user = True
  role = 'attorney'
  if introduction_made and participants_invited:
    if user_logged_in():
      if user_info().email == client_email:
        role = 'client'
---
event: role_event
question: Waiting on another participant
subquestion: |
  % if 'client' in role_needed:
  We are waiting for a client.
  % else:
  We are waiting for the attorney.
  % endif

  % if not user_logged_in():
  If you were invited to participate, please click "Sign in."
  % endif

  Press **Check** to check on the status.
buttons:
  - Check: refresh
---
field: introduction_made
question: |
  Welcome to the engagement letter generator.
subquestion:
  This is the start of the engagement letter system.
  % if role = 'attorney':
    You are the attorney. Your email is ${ user_info().email }
  % elif role = 'client':
    You are the client
  % else
  We could not determine your role
  % endif
  To continue, press **Continue**.
---
code: |
  if attorney_email == client_email:
    organizer_messed_up
  else:
    recipients_ok = True
---
field: participants_invited
need: recipients_ok
question: |
  Invite the client signor
subquestion: |
  Ok, send e-mails to ${ client_email } and
  ${ attorney_email } inviting them to participate.

  Tell them to go to the following URL:

  [${ interview_url() }](${ interview_url() })
---
  question: |
  What is the e-mail address of the client signor?
fields:
  - Client Signor: client_email
    datatype: email
---
mandatory: True
code: |
  user_done
---
question: |
  % if user_doing_well:
  Good to hear it!
  % else:
  Sorry to hear that!
  % endif
sets: user_done
buttons:
  - Exit: exit
  - Restart: restart
---
question: Are you doing well today?
yesno: user_doing_well
...
